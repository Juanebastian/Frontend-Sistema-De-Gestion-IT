<div class="p-6 bg-white rounded-2xl shadow-xl relative">
  <h2 class="text-lg font-semibold text-gray-800 mb-4 flex items-center justify-between">
    <div class="flex items-center gap-2">
      <svg class="w-5 h-5 text-blue-500" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L15 12.75 9.75 8.5" />
      </svg>
      Lista de Computadores
    </div>
    <button (click)="abrirFormulario()"
      class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 text-sm rounded-md transition duration-200">
      + Agregar Computador
    </button>
  </h2>

  <div *ngIf="cargando" class="flex items-center gap-2 text-blue-600 font-medium">
    <span class="animate-spin h-5 w-5 border-4 border-blue-300 border-t-transparent rounded-full"></span>
    Cargando computadores...
  </div>
  <div *ngIf="error" class="text-red-600 font-semibold mb-4">{{ error }}</div>

  <div *ngIf="!cargando && computadores.length" class="overflow-x-auto">
    <table class="w-full text-left border-collapse shadow-sm rounded-xl overflow-hidden">
      <thead class="bg-blue-100 text-blue-800 text-sm uppercase tracking-wider">
        <tr>
          <th class="px-6 py-3">ID</th>
          <th class="px-6 py-3">Marca</th>
          <th class="px-6 py-3">Modelo</th>
          <th class="px-6 py-3">SO ID</th>
          <th class="px-6 py-3">Tipo ID</th>
          <th class="px-6 py-3">Área</th>
          <th class="px-6 py-3">Registrado Por</th>
          <th class="px-6 py-3">RAM (GB)</th>
          <th class="px-6 py-3">Disco Duro (TB)</th>
          <th class="px-6 py-3">Serie</th>
          <th class="px-6 py-3">Código Inventario</th>
          <th class="px-6 py-3">Fecha Adquisición</th>
          <th class="px-6 py-3">Activo</th>
          <th class="px-6 py-3">Fecha Creación</th>
          <th class="px-6 py-3">Fecha Actualización</th>
          <th class="px-6 py-3">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let pc of computadores"
            class="odd:bg-white even:bg-gray-50 hover:bg-blue-50 transition-colors duration-200">
          <td class="px-6 py-3">{{ pc.id }}</td>
          <td class="px-6 py-3">{{ getNombreMarca(pc.marca_id) }}</td>
          <td class="px-6 py-3">{{ getNombreModelo(pc.modelo_id) }}</td>
          <td class="px-6 py-3">{{ getNombreSO(pc.sistema_operativo_id) }}</td>
          <td class="px-6 py-3">{{ pc.tipo_id }}</td>
          <td class="px-6 py-3">{{ getNombreArea(pc.area_id) }}</td>
          <td class="px-6 py-3">{{ pc.id_registrado_por }}</td>
          <td class="px-6 py-3">{{ pc.ram }}</td>
          <td class="px-6 py-3">{{ pc.disco_duro }}</td>
          <td class="px-6 py-3">{{ pc.serie }}</td>
          <td class="px-6 py-3">{{ pc.codigo_inventario }}</td>
          <td class="px-6 py-3">{{ pc.fecha_adquisicion | date:'yyyy-MM-dd' }}</td>
          <td class="px-6 py-3">
            <span [ngClass]="pc.activo ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'"
                  class="px-3 py-1 rounded-full text-xs font-semibold">
              {{ pc.activo ? 'Activo' : 'Inactivo' }}
            </span>
          </td>
          <td class="px-6 py-3">{{ pc.fecha_creacion | date:'yyyy-MM-dd HH:mm' }}</td>
          <td class="px-6 py-3">{{ pc.fecha_actualizacion | date:'yyyy-MM-dd HH:mm' }}</td>
          <td class="px-6 py-3">
            <button (click)="editarComputador(pc)"
                    class="text-sm bg-yellow-400 hover:bg-yellow-500 text-white px-3 py-1 rounded-lg">
              Editar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="!cargando && computadores.length === 0" class="text-gray-600 mt-4 text-center">
    No hay computadores disponibles.
  </div>
</div>


  <!-- Modal de Formulario -->
  <div *ngIf="mostrarFormulario" class="fixed inset-0 bg-black bg-opacity-40 flex justify-center items-center z-50 p-4">
    <div
      class="bg-white w-full max-w-md max-h-[90vh] p-6 rounded-lg shadow-lg overflow-y-auto relative"
      style="min-width: 320px;"
    >
      <h3 class="text-xl font-bold mb-4">{{ computadorEditando ? 'Editar Computador' : 'Agregar Computador' }}</h3>

      <form (ngSubmit)="guardarComputador()" #form="ngForm" novalidate>
        <div class="mb-3">
          <label class="block text-sm font-medium text-gray-700" for="ram">RAM</label>
          <input
            id="ram"
            [(ngModel)]="nuevoComputador.ram"
            name="ram"
            required
            class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        </div>

        <div class="mb-3">
          <label class="block text-sm font-medium text-gray-700" for="disco_duro">Disco Duro</label>
          <input
            id="disco_duro"
            [(ngModel)]="nuevoComputador.disco_duro"
            name="disco_duro"
            required
            class="w-full border border-gray-300 rounded px-3 py-2"
          />
        </div>

        <div class="mb-3">
          <label class="block text-sm font-medium text-gray-700" for="serie">Serie</label>
          <input
            id="serie"
            [(ngModel)]="nuevoComputador.serie"
            name="serie"
            required
            class="w-full border border-gray-300 rounded px-3 py-2"
          />
        </div>

        <div class="mb-3">
          <label class="block text-sm font-medium text-gray-700" for="codigo_inventario">Código Inventario</label>
          <input
            id="codigo_inventario"
            [(ngModel)]="nuevoComputador.codigo_inventario"
            name="codigo_inventario"
            required
            class="w-full border border-gray-300 rounded px-3 py-2"
          />
        </div>

        <div class="mb-3">
          <label class="block text-sm font-medium text-gray-700" for="fecha_adquisicion">Fecha de Adquisición</label>
          <input
            id="fecha_adquisicion"
            type="date"
            [(ngModel)]="nuevoComputador.fecha_adquisicion"
            name="fecha_adquisicion"
            required
            class="w-full border border-gray-300 rounded px-3 py-2"
          />
        </div>

        <div class="mb-4">
          <label class="block text-sm font-medium text-gray-700 mb-1">Marca</label>
          <select [(ngModel)]="nuevoComputador.marca_id" name="marca_id" required
                  class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option [ngValue]="0" disabled>Seleccione una marca</option>
            <option *ngFor="let marca of marcas" [ngValue]="marca.id">{{ marca.nombre }}</option>
          </select>
        </div>

        <div class="mb-3">
          <label class="block text-sm font-medium text-gray-700" for="modelo_id">Modelo</label>
          <select
            id="modelo_id"
            name="modelo_id"
            [(ngModel)]="nuevoComputador.modelo_id"
            required
            class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"
          >
            <option [value]="0" disabled>Seleccione un modelo</option>
            <option *ngFor="let modelo of modelos" [value]="modelo.id">{{ modelo.nombre }}</option>
          </select>
        </div>
        

        <div class="mb-3">
          <label class="block text-sm font-medium text-gray-700" for="sistema_operativo_id">Sistema Operativo ID</label>
          <select
            [(ngModel)]="nuevoComputador.sistema_operativo_id"
            name="sistema_operativo"
            required
            class="block w-full rounded border border-gray-300 bg-white py-2 px-3 text-gray-700 focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500"
          >
            <option *ngFor="let so of sistemasOperativos" [value]="so.id">{{ so.nombre }}</option>
          </select>
        </div>

        <div class="mb-3">
          <label class="block text-sm font-medium text-gray-700" for="tipo_id">Tipo ID</label>
          <input
            id="tipo_id"
            type="number"
            [(ngModel)]="nuevoComputador.tipo_id"
            name="tipo_id"
            required
            class="w-full border border-gray-300 rounded px-3 py-2"
            min="1"
          />
        </div>

        <div class="mb-3">
          <label for="area_id" class="block text-sm font-medium text-gray-700">Área</label>
          <select
            id="area_id"
            name="area_id"
            class="w-full border border-gray-300 rounded px-3 py-2"
            [(ngModel)]="nuevoComputador.area_id"
            required
          >
            <option value="" disabled selected>Seleccione un área</option>
            <option *ngFor="let area of areas" [value]="area.id">
              {{ area.nombre }}
            </option>
          </select>
        </div>

        <div class="mb-3 flex items-center gap-2">
          <input
            id="activo"
            type="checkbox"
            [(ngModel)]="nuevoComputador.activo"
            name="activo"
            class="w-5 h-5"
          />
          <label for="activo" class="text-sm font-medium text-gray-700 select-none">Activo</label>
        </div>

        <div class="flex justify-end gap-3 mt-6">
          <button type="button"
            (click)="cerrarFormulario()"
            class="bg-gray-300 hover:bg-gray-400 px-4 py-2 rounded-md text-gray-700 font-semibold transition">
            Cancelar
          </button>
          <button
            type="submit"
            [disabled]="form.invalid"
            class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-md font-semibold disabled:opacity-50 transition"
          >
            Guardar
          </button>
        </div>
      </form>
    </div>
  </div>

